{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dmuino/shop_time/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/dmuino/shop_time/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{ADD_ITEM,GET_TOTAL,GET_ITEM_TOTAL,GET_ITEMS,UPDATE_ITEM,REMOVE_ITEM,EMPTY_CART,ADD_ITEM_SUCCESS,ADD_ITEM_FAIL,GET_TOTAL_SUCCESS,GET_TOTAL_FAIL,GET_ITEM_TOTAL_SUCCESS,GET_ITEM_TOTAL_FAIL,GET_ITEMS_SUCCESS,GET_ITEMS_FAIL,UPDATE_ITEM_SUCCESS,UPDATE_ITEM_FAIL,REMOVE_ITEM_SUCCESS,REMOVE_ITEM_FAIL,EMPTY_CART_SUCCESS,EMPTY_CART_FAIL,SYNCH_CART_SUCCESS,SYNCH_CART_FAIL}from'./types';export var add_item=function add_item(product){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,product_id,body,res,cart,shouldAddItem,order_item;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!localStorage.getItem('access')){_context.next=16;break;}config={headers:{'Content-Type':'application/json','Accept':'application/json','Authorization':\"JWT \".concat(localStorage.getItem('access'))}};product_id=product.id;body=JSON.stringify({product_id:product_id});_context.prev=4;_context.next=7;return axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/api/cart/add-item\"),body,config);case 7:res=_context.sent;if(res.status===201){dispatch({type:ADD_ITEM_SUCCESS,payload:res.data});}else{dispatch({type:ADD_ITEM_FAIL});}_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](4);dispatch({type:ADD_ITEM_FAIL});case 14:_context.next=23;break;case 16:cart=[];if(localStorage.getItem('cart')){cart=JSON.parse(localStorage.getItem('cart'));}shouldAddItem=true;cart.map(function(item){if(product.id.toString()===item.product.id.toString()){shouldAddItem=false;}});order_item={product:product,count:1};if(shouldAddItem){cart.push(order_item);}dispatch({type:ADD_ITEM,payload:cart});case 23:case\"end\":return _context.stop();}}},_callee,null,[[4,11]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var get_items=function get_items(){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var config,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!localStorage.getItem('access')){_context2.next=14;break;}config={headers:{'Accept':'application/json','Authorization':\"JWT \".concat(localStorage.getItem('access'))}};_context2.prev=2;_context2.next=5;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/cart/cart-items\"),config);case 5:res=_context2.sent;if(res.status===200){dispatch({type:GET_ITEMS_SUCCESS,payload:res.data});}else{dispatch({type:GET_ITEMS_FAIL});}_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](2);dispatch({type:GET_ITEMS_FAIL});case 12:_context2.next=15;break;case 14:dispatch({type:GET_ITEMS});case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[2,9]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var get_total=function get_total(){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var config,res,total,compare_total,cart;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!localStorage.getItem('access')){_context3.next=14;break;}config={headers:{'Accept':'application/json','Authorization':\"JWT \".concat(localStorage.getItem('access'))}};_context3.prev=2;_context3.next=5;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/cart/get-total\"),config);case 5:res=_context3.sent;if(res.status===200){dispatch({type:GET_TOTAL_SUCCESS,payload:res.data});}else{dispatch({type:GET_TOTAL_FAIL});}_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](2);dispatch({type:GET_TOTAL_FAIL});case 12:_context3.next=19;break;case 14:total=0.0;compare_total=0.0;cart=[];if(localStorage.getItem('cart')){cart=JSON.parse(localStorage.getItem('cart'));cart.map(function(item){total+=parseFloat(item.product.price)*parseFloat(item.count);compare_total+=parseFloat(item.product.compare_price)*parseFloat(item.count);});}dispatch({type:GET_TOTAL,payload:[parseFloat(total.toFixed(2)),parseFloat(compare_total.toFixed(2))]});case 19:case\"end\":return _context3.stop();}}},_callee3,null,[[2,9]]);}));return function(_x3){return _ref3.apply(this,arguments);};}();};export var get_item_total=function get_item_total(){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch){var config,res,total;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(!localStorage.getItem('access')){_context4.next=14;break;}config={headers:{'Accept':'application/json','Authorization':\"JWT \".concat(localStorage.getItem('access'))}};_context4.prev=2;_context4.next=5;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/cart/get-item-total\"),config);case 5:res=_context4.sent;if(res.status===200){dispatch({type:GET_ITEM_TOTAL_SUCCESS,payload:res.data});}else{dispatch({type:GET_ITEM_TOTAL_FAIL});}_context4.next=12;break;case 9:_context4.prev=9;_context4.t0=_context4[\"catch\"](2);dispatch({type:GET_ITEM_TOTAL_FAIL});case 12:_context4.next=17;break;case 14:total=0;if(localStorage.getItem('cart')){total=JSON.parse(localStorage.getItem('cart')).length;}dispatch({type:GET_ITEM_TOTAL,payload:total});case 17:case\"end\":return _context4.stop();}}},_callee4,null,[[2,9]]);}));return function(_x4){return _ref4.apply(this,arguments);};}();};export var update_item=function update_item(item,count){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch){var config,product_id,body,res,cart;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!localStorage.getItem('access')){_context5.next=16;break;}config={headers:{'Content-Type':'application/json','Accept':'application/json','Authorization':\"JWT \".concat(localStorage.getItem('access'))}};product_id=item.product.id;body=JSON.stringify({product_id:product_id,count:count});_context5.prev=4;_context5.next=7;return axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/api/cart/update-item\"),body,config);case 7:res=_context5.sent;if(res.status===200&&!res.data.error){dispatch({type:UPDATE_ITEM_SUCCESS,payload:res.data});}else{dispatch({type:UPDATE_ITEM_FAIL});}_context5.next=14;break;case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](4);dispatch({type:UPDATE_ITEM_FAIL});case 14:_context5.next=19;break;case 16:cart=[];if(localStorage.getItem('cart')){cart=JSON.parse(localStorage.getItem('cart'));cart.map(function(cart_item,index){if(cart_item.product.id.toString()===item.product.id.toString()){cart[index].count=parseInt(count);}});}dispatch({type:UPDATE_ITEM,payload:cart});case 19:case\"end\":return _context5.stop();}}},_callee5,null,[[4,11]]);}));return function(_x5){return _ref5.apply(this,arguments);};}();};export var remove_item=function remove_item(item){return/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch){var product_id,body,config,res,cart,new_cart;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:if(!localStorage.getItem('access')){_context6.next=16;break;}product_id=item.product.id;body=JSON.stringify({product_id:product_id});config={headers:{'Content-Type':'application/json','Accept':'application/json','Authorization':\"JWT \".concat(localStorage.getItem('access'))},data:body};_context6.prev=4;_context6.next=7;return axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/api/cart/remove-item\"),config);case 7:res=_context6.sent;if(res.status===200){dispatch({type:REMOVE_ITEM_SUCCESS,payload:res.data});}else{dispatch({type:REMOVE_ITEM_FAIL});}_context6.next=14;break;case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](4);dispatch({type:REMOVE_ITEM_FAIL});case 14:_context6.next=20;break;case 16:cart=[];new_cart=[];if(localStorage.getItem('cart')){cart=JSON.parse(localStorage.getItem('cart'));cart.map(function(cart_item){if(cart_item.product.id.toString()!==item.product.id.toString()){new_cart.push(cart_item);}});}dispatch({type:REMOVE_ITEM,payload:new_cart});case 20:case\"end\":return _context6.stop();}}},_callee6,null,[[4,11]]);}));return function(_x6){return _ref6.apply(this,arguments);};}();};export var empty_cart=function empty_cart(){return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var config,res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:if(!localStorage.getItem('access')){_context7.next=14;break;}config={headers:{'Accept':'application/json','Authorization':\"JWT \".concat(localStorage.getItem('access'))}};_context7.prev=2;_context7.next=5;return axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/api/cart/empty-cart\"),config);case 5:res=_context7.sent;if(res.status===200){dispatch({type:EMPTY_CART_SUCCESS});}else{dispatch({type:EMPTY_CART_FAIL});}_context7.next=12;break;case 9:_context7.prev=9;_context7.t0=_context7[\"catch\"](2);dispatch({type:EMPTY_CART_FAIL});case 12:_context7.next=15;break;case 14:dispatch({type:EMPTY_CART});case 15:case\"end\":return _context7.stop();}}},_callee7,null,[[2,9]]);}));return function(_x7){return _ref7.apply(this,arguments);};}();};export var synch_cart=function synch_cart(){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var config,cart_items,cart,body,res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:config={headers:{'Content-Type':'application/json','Accept':'application/json','Authorization':\"JWT \".concat(localStorage.getItem('access'))}};cart_items=[];if(localStorage.getItem('cart')){cart=JSON.parse(localStorage.getItem('cart'));cart.map(function(cart_item){var item={};item.product_id=cart_item.product.id;item.count=cart_item.count;cart_items.push(item);});}body=JSON.stringify({cart_items:cart_items});_context8.prev=4;_context8.next=7;return axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/api/cart/synch\"),body,config);case 7:res=_context8.sent;if(res.status===201){dispatch({type:SYNCH_CART_SUCCESS});}else{dispatch({type:SYNCH_CART_FAIL});}_context8.next=14;break;case 11:_context8.prev=11;_context8.t0=_context8[\"catch\"](4);dispatch({type:SYNCH_CART_FAIL});case 14:case\"end\":return _context8.stop();}}},_callee8,null,[[4,11]]);}));return function(_x8){return _ref8.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/dmuino/shop_time/src/actions/cart.js"],"names":["axios","ADD_ITEM","GET_TOTAL","GET_ITEM_TOTAL","GET_ITEMS","UPDATE_ITEM","REMOVE_ITEM","EMPTY_CART","ADD_ITEM_SUCCESS","ADD_ITEM_FAIL","GET_TOTAL_SUCCESS","GET_TOTAL_FAIL","GET_ITEM_TOTAL_SUCCESS","GET_ITEM_TOTAL_FAIL","GET_ITEMS_SUCCESS","GET_ITEMS_FAIL","UPDATE_ITEM_SUCCESS","UPDATE_ITEM_FAIL","REMOVE_ITEM_SUCCESS","REMOVE_ITEM_FAIL","EMPTY_CART_SUCCESS","EMPTY_CART_FAIL","SYNCH_CART_SUCCESS","SYNCH_CART_FAIL","add_item","product","dispatch","localStorage","getItem","config","headers","product_id","id","body","JSON","stringify","post","process","env","REACT_APP_API_URL","res","status","type","payload","data","cart","parse","shouldAddItem","map","item","toString","order_item","count","push","get_items","get","get_total","total","compare_total","parseFloat","price","compare_price","toFixed","get_item_total","length","update_item","put","error","cart_item","index","parseInt","remove_item","delete","new_cart","empty_cart","synch_cart","cart_items"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport {\n    ADD_ITEM,\n    GET_TOTAL,\n    GET_ITEM_TOTAL,\n    GET_ITEMS,\n    UPDATE_ITEM,\n    REMOVE_ITEM,\n    EMPTY_CART,\n    ADD_ITEM_SUCCESS,\n    ADD_ITEM_FAIL,\n    GET_TOTAL_SUCCESS,\n    GET_TOTAL_FAIL,\n    GET_ITEM_TOTAL_SUCCESS,\n    GET_ITEM_TOTAL_FAIL,\n    GET_ITEMS_SUCCESS,\n    GET_ITEMS_FAIL,\n    UPDATE_ITEM_SUCCESS,\n    UPDATE_ITEM_FAIL,\n    REMOVE_ITEM_SUCCESS,\n    REMOVE_ITEM_FAIL,\n    EMPTY_CART_SUCCESS,\n    EMPTY_CART_FAIL,\n    SYNCH_CART_SUCCESS,\n    SYNCH_CART_FAIL,\n} from './types';\n\nexport const add_item = product => async dispatch => {\n    if (localStorage.getItem('access')) {\n        const config = {\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n                'Authorization': `JWT ${localStorage.getItem('access')}`,\n            }\n        };\n\n        const product_id = product.id;\n        const body = JSON.stringify({ product_id });\n\n        try {\n            const res = await axios.post(`${process.env.REACT_APP_API_URL}/api/cart/add-item`, body, config);\n\n            if (res.status === 201) {\n                dispatch({\n                    type: ADD_ITEM_SUCCESS,\n                    payload: res.data\n                });\n            } else {\n                dispatch({\n                    type: ADD_ITEM_FAIL\n                });\n            }\n        } catch(err) {\n            dispatch({\n                type: ADD_ITEM_FAIL\n            });\n        }\n    } else {\n        let cart = [];\n\n        if (localStorage.getItem('cart')) {\n            cart = JSON.parse(localStorage.getItem('cart'));\n        }\n\n        let shouldAddItem = true;\n\n        cart.map(item => {\n            if (product.id.toString() === item.product.id.toString()) {\n                shouldAddItem = false;\n            }\n        });\n\n        const order_item = {\n            product: product,\n            count: 1\n        };\n\n        if (shouldAddItem) {\n            cart.push(order_item);\n        }\n\n        dispatch({\n            type: ADD_ITEM,\n            payload: cart\n        });\n    }\n};\n\nexport const get_items = () => async dispatch => {\n    if (localStorage.getItem('access')) {\n        const config = {\n            headers: {\n                'Accept': 'application/json',\n                'Authorization': `JWT ${localStorage.getItem('access')}`,\n            }\n        };\n\n        try {\n            const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/cart/cart-items`, config);\n\n            if (res.status === 200) {\n                dispatch({\n                    type: GET_ITEMS_SUCCESS,\n                    payload: res.data\n                });\n            } else {\n                dispatch({\n                    type: GET_ITEMS_FAIL\n                });\n            }\n        } catch(err) {\n            dispatch({\n                type: GET_ITEMS_FAIL\n            });\n        }\n    } else {\n        dispatch({\n            type: GET_ITEMS\n        });\n    }\n};\n\nexport const get_total = () => async dispatch => {\n    if (localStorage.getItem('access')) {\n        const config = {\n            headers: {\n                'Accept': 'application/json',\n                'Authorization': `JWT ${localStorage.getItem('access')}`,\n            }\n        };\n\n        try {\n            const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/cart/get-total`, config);\n\n            if (res.status === 200) {\n                dispatch({\n                    type: GET_TOTAL_SUCCESS,\n                    payload: res.data\n                });\n            } else {\n                dispatch({\n                    type: GET_TOTAL_FAIL\n                });\n            }\n        } catch(err) {\n            dispatch({\n                type: GET_TOTAL_FAIL\n            });\n        }\n    } else {\n        let total = 0.0;\n        let compare_total = 0.0;\n        let cart = [];\n\n        if (localStorage.getItem('cart')) {\n            cart = JSON.parse(localStorage.getItem('cart'));\n\n            cart.map(item => {\n                total += parseFloat(item.product.price) * parseFloat(item.count);\n                compare_total += parseFloat(item.product.compare_price) * parseFloat(item.count);\n            });\n        }\n\n        dispatch({\n            type: GET_TOTAL,\n            payload: [parseFloat(total.toFixed(2)), parseFloat(compare_total.toFixed(2))]\n        });\n    }\n};\n\nexport const get_item_total = () => async dispatch => {\n    if (localStorage.getItem('access')) {\n        const config = {\n            headers: {\n                'Accept': 'application/json',\n                'Authorization': `JWT ${localStorage.getItem('access')}`,\n            }\n        };\n\n        try {\n            const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/cart/get-item-total`, config);\n\n            if (res.status === 200) {\n                dispatch({\n                    type: GET_ITEM_TOTAL_SUCCESS,\n                    payload: res.data\n                });\n            } else {\n                dispatch({\n                    type: GET_ITEM_TOTAL_FAIL\n                });\n            }\n        } catch(err) {\n            dispatch({\n                type: GET_ITEM_TOTAL_FAIL\n            });\n        }\n    } else {\n        let total = 0;\n\n        if (localStorage.getItem('cart')) {\n            total = JSON.parse(localStorage.getItem('cart')).length;\n        }\n\n        dispatch({\n            type: GET_ITEM_TOTAL,\n            payload: total\n        });\n    }\n};\n\nexport const update_item = (item, count) => async dispatch => {\n    if (localStorage.getItem('access')) {\n        const config = {\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n                'Authorization': `JWT ${localStorage.getItem('access')}`,\n            }\n        };\n\n        const product_id = item.product.id;\n        const body = JSON.stringify({ product_id, count });\n\n        try {\n            const res = await axios.put(`${process.env.REACT_APP_API_URL}/api/cart/update-item`, body, config);\n\n            if (res.status === 200 && !res.data.error) {\n                dispatch({\n                    type: UPDATE_ITEM_SUCCESS,\n                    payload: res.data\n                });\n            } else {\n                dispatch({\n                    type: UPDATE_ITEM_FAIL\n                });\n            }\n        } catch(err) {\n            dispatch({\n                type: UPDATE_ITEM_FAIL\n            });\n        }\n    } else {\n        let cart = [];\n\n        if (localStorage.getItem('cart')) {\n            cart = JSON.parse(localStorage.getItem('cart'));\n\n            cart.map((cart_item, index) => {\n                if (cart_item.product.id.toString() === item.product.id.toString()) {\n                    cart[index].count = parseInt(count);\n                }\n            });\n        }\n\n        dispatch({\n            type: UPDATE_ITEM,\n            payload: cart\n        });\n    }\n};\n\nexport const remove_item = item => async dispatch => {\n    if (localStorage.getItem('access')) {\n        const product_id = item.product.id;\n        const body = JSON.stringify({ product_id });\n\n        const config = {\n            headers: {\n                'Content-Type': 'application/json',\n                'Accept': 'application/json',\n                'Authorization': `JWT ${localStorage.getItem('access')}`,\n            },\n            data: body\n        };\n\n        try {\n            const res = await axios.delete(`${process.env.REACT_APP_API_URL}/api/cart/remove-item`, config);\n\n            if (res.status === 200) {\n                dispatch({\n                    type: REMOVE_ITEM_SUCCESS,\n                    payload: res.data\n                });\n            } else {\n                dispatch({\n                    type: REMOVE_ITEM_FAIL\n                });\n            }\n        } catch(err) {\n            dispatch({\n                type: REMOVE_ITEM_FAIL\n            });\n        }\n    } else {\n        let cart = [];\n        let new_cart = [];\n\n        if (localStorage.getItem('cart')) {\n            cart = JSON.parse(localStorage.getItem('cart'));\n\n            cart.map(cart_item => {\n                if (cart_item.product.id.toString() !== item.product.id.toString()) {\n                    new_cart.push(cart_item);\n                }\n            });\n        }\n\n        dispatch({\n            type: REMOVE_ITEM,\n            payload: new_cart\n        });\n    }\n};\n\nexport const empty_cart = () => async dispatch => {\n    if (localStorage.getItem('access')) {\n        const config = {\n            headers: {\n                'Accept': 'application/json',\n                'Authorization': `JWT ${localStorage.getItem('access')}`,\n            }\n        };\n\n        try {\n            const res = await axios.delete(`${process.env.REACT_APP_API_URL}/api/cart/empty-cart`, config);\n\n            if (res.status === 200) {\n                dispatch({\n                    type: EMPTY_CART_SUCCESS\n                });\n            } else {\n                dispatch({\n                    type: EMPTY_CART_FAIL\n                });\n            }\n        } catch(err) {\n            dispatch({\n                type: EMPTY_CART_FAIL\n            });\n        }\n    } else {\n        dispatch({\n            type: EMPTY_CART\n        });\n    }\n};\n\nexport const synch_cart = () => async dispatch => {\n    const config = {\n        headers: {\n            'Content-Type': 'application/json',\n            'Accept': 'application/json',\n            'Authorization': `JWT ${localStorage.getItem('access')}`,\n        }\n    };\n\n    let cart_items = [];\n\n    if (localStorage.getItem('cart')) {\n        let cart = JSON.parse(localStorage.getItem('cart'));\n\n        cart.map(cart_item => {\n            const item = {};\n            item.product_id = cart_item.product.id;\n            item.count = cart_item.count;\n            cart_items.push(item);\n        });\n    }\n\n    const body = JSON.stringify({ cart_items });\n\n    try {\n        const res = await axios.put(`${process.env.REACT_APP_API_URL}/api/cart/synch`, body, config);\n\n        if (res.status === 201) {\n            dispatch({\n                type: SYNCH_CART_SUCCESS\n            });\n        } else {\n            dispatch({\n                type: SYNCH_CART_FAIL\n            });\n        }\n    } catch(err) {\n        dispatch({\n            type: SYNCH_CART_FAIL\n        });\n    }\n};\n"]},"metadata":{},"sourceType":"module"}