{"ast":null,"code":"import _regeneratorRuntime from\"/Users/dmuino/shop_time/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/dmuino/shop_time/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from'axios';import{setAlert}from'./alert';import{GET_USER_PROFILE_SUCCESS,GET_USER_PROFILE_FAIL,UPDATE_USER_PROFILE_SUCCESS,UPDATE_USER_PROFILE_FAIL}from'./types';export var get_user_profile=function get_user_profile(){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var config,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!localStorage.getItem('access')){_context.next=12;break;}config={headers:{'Accept':'application/json','Authorization':\"JWT \".concat(localStorage.getItem('access'))}};_context.prev=2;_context.next=5;return axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/api/profile/user\"),config);case 5:res=_context.sent;if(res.status===200){dispatch({type:GET_USER_PROFILE_SUCCESS,payload:res.data});}else{dispatch({type:GET_USER_PROFILE_FAIL});}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);dispatch({type:GET_USER_PROFILE_FAIL});case 12:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();};export var update_user_profile=function update_user_profile(address_line_1,address_line_2,city,state_province_region,zipcode,phone,country_region){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var config,body,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!localStorage.getItem('access')){_context2.next=14;break;}config={headers:{'Accept':'application/json','Content-Type':'application/json','Authorization':\"JWT \".concat(localStorage.getItem('access'))}};body=JSON.stringify({address_line_1:address_line_1,address_line_2:address_line_2,city:city,state_province_region:state_province_region,zipcode:zipcode,phone:phone,country_region:country_region});_context2.prev=3;_context2.next=6;return axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/api/profile/update\"),body,config);case 6:res=_context2.sent;if(res.status===200){dispatch({type:UPDATE_USER_PROFILE_SUCCESS,payload:res.data});dispatch(setAlert('Profile updated successfully','success'));}else{dispatch({type:UPDATE_USER_PROFILE_FAIL});dispatch(setAlert('Failed to update profile','danger'));}_context2.next=14;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](3);dispatch({type:UPDATE_USER_PROFILE_FAIL});dispatch(setAlert('Failed to update profile','danger'));case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[3,10]]);}));return function(_x2){return _ref2.apply(this,arguments);};}();};","map":{"version":3,"sources":["/Users/dmuino/shop_time/src/actions/profile.js"],"names":["axios","setAlert","GET_USER_PROFILE_SUCCESS","GET_USER_PROFILE_FAIL","UPDATE_USER_PROFILE_SUCCESS","UPDATE_USER_PROFILE_FAIL","get_user_profile","dispatch","localStorage","getItem","config","headers","get","process","env","REACT_APP_API_URL","res","status","type","payload","data","update_user_profile","address_line_1","address_line_2","city","state_province_region","zipcode","phone","country_region","body","JSON","stringify","put"],"mappings":"yRAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,SAAzB,CACA,OACIC,wBADJ,CAEIC,qBAFJ,CAGIC,2BAHJ,CAIIC,wBAJJ,KAKO,SALP,CAOA,MAAO,IAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,kGAAM,iBAAMC,QAAN,qIAC9BC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAD8B,0BAExBC,MAFwB,CAEf,CACXC,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,8BAAwBH,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAxB,CAFK,CADE,CAFe,uCAURT,CAAAA,KAAK,CAACY,GAAN,WAAaC,OAAO,CAACC,GAAR,CAAYC,iBAAzB,sBAA+DL,MAA/D,CAVQ,QAUpBM,GAVoB,eAY1B,GAAIA,GAAG,CAACC,MAAJ,GAAe,GAAnB,CAAwB,CACpBV,QAAQ,CAAC,CACLW,IAAI,CAAEhB,wBADD,CAELiB,OAAO,CAAEH,GAAG,CAACI,IAFR,CAAD,CAAR,CAIH,CALD,IAKO,CACHb,QAAQ,CAAC,CACLW,IAAI,CAAEf,qBADD,CAAD,CAAR,CAGH,CArByB,+EAuB1BI,QAAQ,CAAC,CACLW,IAAI,CAAEf,qBADD,CAAD,CAAR,CAvB0B,oEAAN,gEAAzB,CA8BP,MAAO,IAAMkB,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAC/BC,cAD+B,CAE/BC,cAF+B,CAG/BC,IAH+B,CAI/BC,qBAJ+B,CAK/BC,OAL+B,CAM/BC,KAN+B,CAO/BC,cAP+B,kGAQ9B,kBAAMrB,QAAN,8IACGC,YAAY,CAACC,OAAb,CAAqB,QAArB,CADH,2BAESC,MAFT,CAEkB,CACXC,OAAO,CAAE,CACL,SAAU,kBADL,CAEL,eAAgB,kBAFX,CAGL,8BAAwBH,YAAY,CAACC,OAAb,CAAqB,QAArB,CAAxB,CAHK,CADE,CAFlB,CAUSoB,IAVT,CAUgBC,IAAI,CAACC,SAAL,CAAe,CACxBT,cAAc,CAAdA,cADwB,CAExBC,cAAc,CAAdA,cAFwB,CAGxBC,IAAI,CAAJA,IAHwB,CAIxBC,qBAAqB,CAArBA,qBAJwB,CAKxBC,OAAO,CAAPA,OALwB,CAMxBC,KAAK,CAALA,KANwB,CAOxBC,cAAc,CAAdA,cAPwB,CAAf,CAVhB,yCAqByB5B,CAAAA,KAAK,CAACgC,GAAN,WAAanB,OAAO,CAACC,GAAR,CAAYC,iBAAzB,wBAAiEc,IAAjE,CAAuEnB,MAAvE,CArBzB,QAqBaM,GArBb,gBAuBO,GAAIA,GAAG,CAACC,MAAJ,GAAe,GAAnB,CAAwB,CACpBV,QAAQ,CAAC,CACLW,IAAI,CAAEd,2BADD,CAELe,OAAO,CAAEH,GAAG,CAACI,IAFR,CAAD,CAAR,CAIAb,QAAQ,CAACN,QAAQ,CAAC,8BAAD,CAAiC,SAAjC,CAAT,CAAR,CACH,CAND,IAMO,CACHM,QAAQ,CAAC,CACLW,IAAI,CAAEb,wBADD,CAAD,CAAR,CAGAE,QAAQ,CAACN,QAAQ,CAAC,0BAAD,CAA6B,QAA7B,CAAT,CAAR,CACH,CAlCR,qFAoCOM,QAAQ,CAAC,CACLW,IAAI,CAAEb,wBADD,CAAD,CAAR,CAGAE,QAAQ,CAACN,QAAQ,CAAC,0BAAD,CAA6B,QAA7B,CAAT,CAAR,CAvCP,uEAR8B,kEAA5B","sourcesContent":["import axios from 'axios';\nimport { setAlert } from './alert';\nimport {\n    GET_USER_PROFILE_SUCCESS,\n    GET_USER_PROFILE_FAIL,\n    UPDATE_USER_PROFILE_SUCCESS,\n    UPDATE_USER_PROFILE_FAIL\n} from './types';\n\nexport const get_user_profile = () => async dispatch => {\n    if (localStorage.getItem('access')) {\n        const config = {\n            headers: {\n                'Accept': 'application/json',\n                'Authorization': `JWT ${localStorage.getItem('access')}`\n            }\n        };\n\n        try {\n            const res = await axios.get(`${process.env.REACT_APP_API_URL}/api/profile/user`, config);\n\n            if (res.status === 200) {\n                dispatch({\n                    type: GET_USER_PROFILE_SUCCESS,\n                    payload: res.data\n                });\n            } else {\n                dispatch({\n                    type: GET_USER_PROFILE_FAIL\n                });\n            }\n        } catch(err) {\n            dispatch({\n                type: GET_USER_PROFILE_FAIL\n            });\n        }\n    }\n};\n\nexport const update_user_profile = (\n    address_line_1,\n    address_line_2,\n    city,\n    state_province_region,\n    zipcode,\n    phone,\n    country_region\n) => async dispatch => {\n    if (localStorage.getItem('access')) {\n        const config = {\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n                'Authorization': `JWT ${localStorage.getItem('access')}`\n            }\n        };\n\n        const body = JSON.stringify({\n            address_line_1,\n            address_line_2,\n            city,\n            state_province_region,\n            zipcode,\n            phone,\n            country_region\n        });\n\n        try {\n            const res = await axios.put(`${process.env.REACT_APP_API_URL}/api/profile/update`, body, config);\n\n            if (res.status === 200) {\n                dispatch({\n                    type: UPDATE_USER_PROFILE_SUCCESS,\n                    payload: res.data\n                });\n                dispatch(setAlert('Profile updated successfully', 'success'));\n            } else {\n                dispatch({\n                    type: UPDATE_USER_PROFILE_FAIL\n                });\n                dispatch(setAlert('Failed to update profile', 'danger'));\n            }\n        } catch(err) {\n            dispatch({\n                type: UPDATE_USER_PROFILE_FAIL\n            });\n            dispatch(setAlert('Failed to update profile', 'danger'));\n        }\n    }\n};\n"]},"metadata":{},"sourceType":"module"}