{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"/Users/dmuino/shop_time/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/dmuino/shop_time/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/dmuino/shop_time/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Redirect}from'react-router-dom';import{connect}from'react-redux';import{get_products,get_filtered_products}from'../actions/products';import{add_item,get_items,get_total,get_item_total}from'../actions/cart';import{get_wishlist_items,get_wishlist_item_total,add_wishlist_item,remove_wishlist_item}from'../actions/wishlist';import{get_categories}from'../actions/categories';import Card from'../components/Card';import ShopForm from'../components/ShopForm';var Shop=function Shop(_ref){var categories=_ref.categories,get_categories=_ref.get_categories,products=_ref.products,get_products=_ref.get_products,filtered_products=_ref.filtered_products,get_filtered_products=_ref.get_filtered_products,add_item=_ref.add_item,get_items=_ref.get_items,get_total=_ref.get_total,get_item_total=_ref.get_item_total,wishlist=_ref.wishlist,get_wishlist_items=_ref.get_wishlist_items,get_wishlist_item_total=_ref.get_wishlist_item_total,add_wishlist_item=_ref.add_wishlist_item,remove_wishlist_item=_ref.remove_wishlist_item,isAuthenticated=_ref.isAuthenticated;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loginRedirect=_useState2[0],setLoginRedirect=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),redirect=_useState4[0],setRedirect=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),filtered=_useState6[0],setFiltered=_useState6[1];var _useState7=useState({category_id:'0',price_range:'Any',sortBy:'date_created',order:'desc'}),_useState8=_slicedToArray(_useState7,2),formData=_useState8[0],setFormData=_useState8[1];var category_id=formData.category_id,price_range=formData.price_range,sortBy=formData.sortBy,order=formData.order;useEffect(function(){get_categories();get_products();window.scrollTo(0,0);},[]);var onChange=function onChange(e){return setFormData(_objectSpread(_objectSpread({},formData),{},_defineProperty({},e.target.name,e.target.value)));};var onSubmit=function onSubmit(e){e.preventDefault();window.scrollTo(0,0);get_filtered_products(category_id,price_range,sortBy,order);setFiltered(true);};var showProducts=function showProducts(){var results=[];var display=[];if(filtered_products&&filtered_products!==null&&filtered_products!==undefined&&filtered){filtered_products.map(function(product,index){return display.push(/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(Card,{product:product,add_item:add_item,get_items:get_items,get_total:get_total,get_item_total:get_item_total,wishlist:wishlist,get_wishlist_items:get_wishlist_items,get_wishlist_item_total:get_wishlist_item_total,add_wishlist_item:add_wishlist_item,remove_wishlist_item:remove_wishlist_item,isAuthenticated:isAuthenticated,setLoginRedirect:setLoginRedirect,setRedirect:setRedirect})},index));});}else if(!filtered&&products&&products!==null&&products!==undefined){products.map(function(product,index){return display.push(/*#__PURE__*/_jsx(\"div\",{className:\"col-4\",children:/*#__PURE__*/_jsx(Card,{product:product,add_item:add_item,get_items:get_items,get_total:get_total,get_item_total:get_item_total,wishlist:wishlist,get_wishlist_items:get_wishlist_items,get_wishlist_item_total:get_wishlist_item_total,add_wishlist_item:add_wishlist_item,remove_wishlist_item:remove_wishlist_item,isAuthenticated:isAuthenticated,setLoginRedirect:setLoginRedirect,setRedirect:setRedirect})},index));});}for(var i=0;i<display.length;i+=3){results.push(/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[display[i]?display[i]:/*#__PURE__*/_jsx(\"div\",{className:\"col-4\"}),display[i+1]?display[i+1]:/*#__PURE__*/_jsx(\"div\",{className:\"col-4\"}),display[i+2]?display[i+2]:/*#__PURE__*/_jsx(\"div\",{className:\"col-4\"})]},i));}return results;};if(loginRedirect)return/*#__PURE__*/_jsx(Redirect,{to:\"/login\"});if(redirect)return/*#__PURE__*/_jsx(Redirect,{to:\"/cart-or-continue-shopping\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"jumbotron mt-5\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"display-4\",children:\"Shop Page\"}),/*#__PURE__*/_jsx(\"p\",{className:\"lead\",children:\"Check out our amazing selection of products!\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-2\",children:/*#__PURE__*/_jsx(ShopForm,{onChange:onChange,onSubmit:onSubmit,categories:categories,sortBy:sortBy,order:order})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-10\",children:showProducts()})]})]});};var mapStateToProps=function mapStateToProps(state){return{categories:state.categories.categories,products:state.products.products,filtered_products:state.products.filtered_products,wishlist:state.wishlist.items,isAuthenticated:state.auth.isAuthenticated};};export default connect(mapStateToProps,{get_categories:get_categories,get_products:get_products,get_filtered_products:get_filtered_products,add_item:add_item,get_items:get_items,get_total:get_total,get_item_total:get_item_total,get_wishlist_items:get_wishlist_items,get_wishlist_item_total:get_wishlist_item_total,add_wishlist_item:add_wishlist_item,remove_wishlist_item:remove_wishlist_item})(Shop);","map":{"version":3,"sources":["/Users/dmuino/shop_time/src/containers/Shop.js"],"names":["React","useState","useEffect","Redirect","connect","get_products","get_filtered_products","add_item","get_items","get_total","get_item_total","get_wishlist_items","get_wishlist_item_total","add_wishlist_item","remove_wishlist_item","get_categories","Card","ShopForm","Shop","categories","products","filtered_products","wishlist","isAuthenticated","loginRedirect","setLoginRedirect","redirect","setRedirect","filtered","setFiltered","category_id","price_range","sortBy","order","formData","setFormData","window","scrollTo","onChange","e","target","name","value","onSubmit","preventDefault","showProducts","results","display","undefined","map","product","index","push","i","length","mapStateToProps","state","items","auth"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport { \n    get_products, \n    get_filtered_products \n} from '../actions/products';\nimport {\n    add_item,\n    get_items,\n    get_total,\n    get_item_total\n} from '../actions/cart';\nimport {\n    get_wishlist_items,\n    get_wishlist_item_total,\n    add_wishlist_item,\n    remove_wishlist_item,\n} from '../actions/wishlist';\nimport { get_categories } from '../actions/categories';\nimport Card from '../components/Card';\nimport ShopForm from '../components/ShopForm';\n\nconst Shop = ({\n    categories,\n    get_categories,\n    products,\n    get_products,\n    filtered_products,\n    get_filtered_products,\n    add_item,\n    get_items,\n    get_total,\n    get_item_total,\n    wishlist,\n    get_wishlist_items,\n    get_wishlist_item_total,\n    add_wishlist_item,\n    remove_wishlist_item,\n    isAuthenticated,\n}) => {\n    const [loginRedirect, setLoginRedirect] = useState(false);\n    const [redirect, setRedirect] = useState(false);\n    const [filtered, setFiltered] = useState(false);\n    const [formData, setFormData] = useState({\n        category_id: '0',\n        price_range: 'Any',\n        sortBy: 'date_created',\n        order: 'desc'\n    });\n\n    const { \n        category_id, \n        price_range,\n        sortBy,\n        order\n    } = formData;\n\n    useEffect(() => {\n        get_categories();\n        get_products();\n        window.scrollTo(0, 0);\n    }, []);\n\n    const onChange = e => setFormData({ ...formData, [e.target.name]: e.target.value });\n\n    const onSubmit = e => {\n        e.preventDefault();\n        window.scrollTo(0, 0);\n\n        get_filtered_products(category_id, price_range, sortBy, order);\n        setFiltered(true);\n    };\n\n    const showProducts = () => {\n        let results = [];\n        let display = [];\n\n        if (\n            filtered_products &&\n            filtered_products !== null &&\n            filtered_products !== undefined &&\n            filtered\n        ) {\n            filtered_products.map((product, index) => {\n                return display.push(\n                    <div key={index} className='col-4'>\n                        <Card\n                            product={product}\n                            add_item={add_item}\n                            get_items={get_items}\n                            get_total={get_total}\n                            get_item_total={get_item_total}\n                            wishlist={wishlist}\n                            get_wishlist_items={get_wishlist_items}\n                            get_wishlist_item_total={get_wishlist_item_total}\n                            add_wishlist_item={add_wishlist_item}\n                            remove_wishlist_item={remove_wishlist_item}\n                            isAuthenticated={isAuthenticated}\n                            setLoginRedirect={setLoginRedirect}\n                            setRedirect={setRedirect}\n                        />\n                    </div>\n                );\n            });\n        } else if (\n            !filtered && \n            products &&\n            products !== null && \n            products !== undefined\n        ) {\n            products.map((product, index) => {\n                return display.push(\n                    <div key={index} className='col-4'>\n                        <Card\n                            product={product}\n                            add_item={add_item}\n                            get_items={get_items}\n                            get_total={get_total}\n                            get_item_total={get_item_total}\n                            wishlist={wishlist}\n                            get_wishlist_items={get_wishlist_items}\n                            get_wishlist_item_total={get_wishlist_item_total}\n                            add_wishlist_item={add_wishlist_item}\n                            remove_wishlist_item={remove_wishlist_item}\n                            isAuthenticated={isAuthenticated}\n                            setLoginRedirect={setLoginRedirect}\n                            setRedirect={setRedirect}\n                        />\n                    </div>\n                );\n            });\n        }\n\n        for (let i = 0; i < display.length; i += 3) {\n            results.push(\n                <div key={i} className='row'>\n                    {display[i] ? display[i] : <div className='col-4'></div>}\n                    {display[i+1] ? display[i+1] : <div className='col-4'></div>}\n                    {display[i+2] ? display[i+2] : <div className='col-4'></div>}\n                </div>\n            );\n        }\n\n        return results;\n    };\n\n    if (loginRedirect)\n        return <Redirect to='/login' />;\n    if (redirect)\n        return <Redirect to='/cart-or-continue-shopping' />;\n\n    return (\n        <div className='container'>\n            <div className='jumbotron mt-5'>\n                <h1 className='display-4'>Shop Page</h1>\n                <p className='lead'>\n                    Check out our amazing selection of products!\n                </p>\n            </div>\n            <div className='row'>\n                <div className='col-2'>\n                    <ShopForm\n                        onChange={onChange}\n                        onSubmit={onSubmit}\n                        categories={categories}\n                        sortBy={sortBy}\n                        order={order}\n                    />\n                </div>\n                <div className='col-10'>\n                    {showProducts()}\n                </div>\n            </div>\n        </div>\n    );\n};\n\nconst mapStateToProps = state => ({\n    categories: state.categories.categories,\n    products: state.products.products,\n    filtered_products: state.products.filtered_products,\n    wishlist: state.wishlist.items,\n    isAuthenticated: state.auth.isAuthenticated,\n});\n\nexport default connect(mapStateToProps, {\n    get_categories,\n    get_products,\n    get_filtered_products,\n    add_item,\n    get_items,\n    get_total,\n    get_item_total,\n    get_wishlist_items,\n    get_wishlist_item_total,\n    add_wishlist_item,\n    remove_wishlist_item,\n})(Shop);"]},"metadata":{},"sourceType":"module"}